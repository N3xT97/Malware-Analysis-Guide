윈도우 서비스는 백그라운드에서 실행되며 OS에 의해 관리되는 특별한 프로세스임.
부팅 시 자동으로 시작하거나 충돌 시 재시작하는 기능이 포함되어 있어 악성코드가 자주 사용함.

#### 윈도우의 Serivces 도구를 사용하면 등록된 서비스들을 확인 가능
![483](images/윈도우%20서비스/IMG-윈도우%20서비스-20240818160206331.png)

서비스는 exe 또는 dll 파일 중 하나의 형태임. 모든 등록된 서비스들은 serivces.exe 프로세스에 의해 직접 실행되거나 services.exe가 svchost.exe 프로세스를 사용해 실행함.

#### 분석 도구를 통해 확인한 services.exe와 svchost.exe
![399](images/윈도우%20서비스/IMG-윈도우%20서비스-20240818160206422.png)

exe 파일이 서비스로 등록되면 Services 도구에서 서비스로 시작될 exe 파일의 경로를 확인할 수 있음.

#### Services에서 확인한 wmiApSrv 서비스의 정보
![300](images/윈도우%20서비스/IMG-윈도우%20서비스-20240818160209756.png)

서비스는 svchost.exe 프로세스를 이요해 dll 파일을 호스팅할 수 있음. 이 경우 svchost.exe는 등록된 실제 서비스의 dll 파일을 실행하는 데 사용되는 컨테이너 역할을 함. Process Explorer를 사용하면 해당 svchost.exe가 어떤 서비스 그룹을 호스팅하는지 어떤 dll 파일들이 로드되었는지 확인할 수 있음.

#### Process Explorer에서 확인한 netsvcs 서비스 그룹의 svchost.exe 정보
![531](images/윈도우%20서비스/IMG-윈도우%20서비스-20240818160209829.png)

서비스 그룹 정보들은 HKLM\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Svchost 경로에 분류되어 저장되어 있음. 해당 서비스 그룹에 포함된 서비스들을 확인 가능.
#### Svchost 레지스트리 키에서 확인 가능한 netsvcs 서비스 그룹 정보
![439](images/윈도우%20서비스/IMG-윈도우%20서비스-20240818160212926.png)

서비스 그룹에 속한 dll 파일의 경로는 HKLM\\SYSTEM\\CurrentControlSet\\Services\\<service_name>\\Parameters\\ServiceDll 경로에서 확인 가능.

#### 레지스트리 키에서 확인 가능한 서비스 dll 파일의 경로
![531](images/윈도우%20서비스/IMG-윈도우%20서비스-20240818160215390.png)